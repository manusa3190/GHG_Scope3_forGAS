<script>

defineStore("master",()=>{
  const 種別マスタitems = ref([])
  const IDEAマスタv2items = ref([]) 
  const 製法マスタitems = ref([])
  const 容リ法マスタitems = ref([
    {分類:'対象外',内容:'容器・包装ではないもの'},
    {分類:'プラ容器',内容:'商品を中に入れるもの（袋を含む）\n中身商品と分離した後不要となるプラ製容器・包装'},
    {分類:'紙容器',内容:'商品を中に入れるもの（袋を含む）\n中身商品と分離した後不要となる紙製容器・包装'},
    {分類:'プラ包装',内容:'商品を包むもので中身商品と分離した後不要となるプラ製容器・包装'},
    {分類:'紙包装',内容:'商品を包むもので中身商品と分離した後不要となる紙製容器・包装'},
    {分類:'ガラス（無色）',内容:'無色のガラス'},
    {分類:'ガラス（茶色）',内容:'茶色のガラス'},
    {分類:'ガラス（他の色）',内容:'無色・茶以外の色のついたガラス'},
    {分類:'PETボトル',内容:'食料品（しょうゆ、※乳飲料等、※その他調味料）、清涼飲料、酒類）を充てんするためのもの'},
  ])

  const fetchマスタ =()=>new Promise((resolve)=>{
    google.script.run
      .withSuccessHandler(res=>{
        種別マスタitems.value = res['種別マスタitems']
        IDEAマスタv2items.value = res['IDEAマスタv2items']
        製法マスタitems.value = res['製法マスタitems']
        resolve()
      })
      .getマスタitems()
  })

  const 種別マスタdocs = computed(()=>{
    return 種別マスタitems.value.reduce((docs,item)=>Object.assign(docs,{[item['種別コード']]:item}),{});
  })

  return {種別マスタitems, 種別マスタdocs, IDEAマスタv2items, 製法マスタitems, 容リ法マスタitems, fetchマスタ}
})

</script>